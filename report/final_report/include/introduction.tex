% In the first sections of this chapter we outline the background, purpose and
% objectives and the last section describes the scope of our research. Chapter 2
% contains the theory needed for understanding the thesis, existing software and
% some verification methods described in the standards. Methods is described in
% Chapter 3 and the results in Chapter 4. In Chapter 5 and 6 we have a discussion
% and some conclusions about the results.

%Background to the assignment. Why is it relevant?
\section{Background}
\subsection{The Development within Automotive Industry}
In the recent decades there has been a dramatic growth of information and
communication innovations within the automotive industry
\cite{CRC:embedded_handbook}. Analog vehicles have been transformed into complex
electromechanical systems \cite{Cambridge:controlsystems}. New features are
implemented (for example due to user demands, traffic safety or environmental
regulations \cite{Springer:advanced_microsystems}\cite{ISO26262}) requiring more
computational power and less energy consumption
\cite{Springer:advanced_microsystems}. The average car has already 80 ECUs
(electronic computation units)
\cite{Springer:advanced_microsystems}\cite{QUVIQ:COURSE} and to deal with
the extra functionality, each ECU will need to
become more complex \cite{Springer:advanced_microsystems}.%  This could be done
% with the use of multicore ECUs, which can provide more computational power in a
% more energy effective way \cite{Springer:advanced_microsystems}.

\subsection{Extent of software in modern Vehicles}
Developing a new car model costs up to one billion \euro
\cite{Clemens:tech_acceptance}, where electronics has reached a mean share of
one third of the value, divided 20\% sensor value, 40\% hardware value and 40\%
software value \cite{Wiley:internetworking}. The share of software has been
doubled the last 10 years \cite{Wiley:internetworking}.

More and more functions will be implemented; Intelligent traffic systems which
make the automotive vehicles communicate \cite{VOLVO:convoys} with the roadside management systems
\cite{Cambridge:controlsystems}, infotainment systems will bring, among other,
weather information through internet and emergency call support
\cite{Wiley:internetworking}\cite{Springer:advanced_microsystems}, traffic sign
recognition \cite{Springer:advanced_microsystems}, night vision
\cite{Wiley:internetworking}\cite{Springer:advanced_microsystems} and automated
parking \cite{Springer:advanced_microsystems}.

The number of lines of code running in a vehicle is another example of how
complex the automotive software is. The software running on a F-22 Raptor
and the F-35 Strike Fighter, US air force attack planes, has about 1.7 million
lines of code and 5.7 million lines of code respectively
\cite{IEEESpectrum:car_code}. The passenger plane Boeing 787 Dreamliner runs on
6.5 million lines of code where the average premium-class car has close to 100
million lines of code \cite{IEEESpectrum:car_code}.

\subsection{Introduction of standards}
Because of the high development costs, and the complexity of modern cars, car
manufacturers, suppliers and other companies related to the automotive industry
joined efforts in 2003 and created AUTOSAR, short for Automotive Open System
Architecture \cite{AUTOSAR:basic_info}. The main purpose is to make it possible
for car manufacturers to buy independent components from different software
suppliers; the AUTOSAR motto is ``Cooperate on standards, compete on
implementation'' \cite{AUTOSAR:basic_info}.

Functional safety was introduced to the automotive industry with ISO 26262 in
late 2011 \cite{ISO26262}. ISO 26262 named ``Road vehicles -- Functional safety''
is a general standard on how the implementation of functional safety in vehicle
development should be carried out from beginning to end \cite{ISO26262}.

This standard is built on top of another industrial standard IEC 61508
\cite{ISO26262}, named ``Functional safety of electrical/electronic/programmable
electronic safety-related systems'' \cite{IEC61508}, which purpose is to ensure
functional safety in computer based system's overall life cycles
\cite{IEC61508}. IEC 61508 adopts a four level system for categorizing the
severity of hazards, and a six level system for classifying the frequency of a
hazard \cite{COURSEBOOK:safety-critical}. There is also four risk classes which
are given the values 1-4 where 1 corresponds to the most serious accidents and
four to the least serious \cite{COURSEBOOK:safety-critical}. Based on this, IEC
61508 has a four level classification of safety integrity levels called SIL,
ranged from 1, being the least critical, to 4, being the most critical
\cite{COURSEBOOK:safety-critical}\cite{IEC61508}\cite{Advances:IEC61508}. Each
of the safety integrity levels has a criteria of maximum frequency of failures
which a system built on that SIL must satisfy
\cite{COURSEBOOK:safety-critical}. In other words, a SIL is a level of measure
of the reliability of a safety function \cite{Advances:SIL4}.
% The targeted SIL of the safety function that is going to be implemented has a
% determined number of measurements needed to be taken to achieve the
% classification \cite{Advances:IEC61508}.
Due to the fact that the failure of a safety function can lead to a hazardous
event, the safety integrity of a specific safety function must be of such a
level to ensure that the failure frequency is sufficiently low or that the
consequences of the hazardous event are modified to meet a tolerable risk
\cite{Advances:IEC61508}\cite{Advances:SIL4}. To ensure safety, functions with SIL 4
need to be tested, and documented the most \cite{IEC61508}.\\
The automotive has adopted a similar system of SIL, namely ASIL, automotive
safety integrity levels. As IEC 61508 there are four integrity levels, named
A-D, but there are no direct correlation between the two \cite{TI:safety_critical}.

\subsection{Testing}
Functional safety demands testing \cite{ISO26262}, and testing accounts for
around half of all software development costs
\cite{QUICKCHECK:lightweight}\cite{QUICKCHECK:software}. Reducing the cost is
motivated and can be done by automating the test generation process
\cite{QUICKCHECK:software}\cite{Testing:black_box}.

The complexity issue is that in systems such as microprocessors the number of
possible failure states is so large that it is considered
infinite \cite{COURSEBOOK:safety-critical}. This makes it impossible exhaustively
test the system, and therefore, also make the detection of failures unreliable.

%Aim for the work. What should be accomplished?
\section{Purpose}
The purpose is to automate the testing process of automotive software in an
effective and good way. To make it possible to raise the Automotive Safety
Integration Level (ASIL), where applicable.

A quick evaluation of tools that can be used in order to perform at least semi
formal verification of automotive software modules. The main purpose is to
evaluate if Quviq QuickCheck can be used for this.

%question formulation?
%The problem at hand, the assignment
\section{Objective}
The first problem at hand is to evaluate what ``semi formal verification'',
according to the ISO-standard, means. In formal methods of mathematics, formal
verification means to prove the correctness of algorithms.
The ISO-standard mentions both ``formal verification'' and ``semi
formal verification'' for software development, but does not describe how to
achieve any of these.
This evaluation must be done to get knowledge of how to properly implement
functional safety and reach an ASIL classification, using automated testing.

%The second problem is to evaluate if QuickCheck can be used to achieve this.
%QuickCheck grants the ability to automate the testing, and knowledge of this
%ool exist in the corporation where this thesis is done. %% Företaget hm....

A model for an AUTOSAR module needs to be implemented. For this to be a good
model some questions first needs to be answered.
How can one achieve good test cases for the model? How can one tweak the test
generation to find test cases that are interesting in a safety critical point of
view? Is the implemented model together with the generated tests good enough to
reach the goals?

The test generation is a big problem when verifying a model. With unit tests, one
can argue for that each line of code has been executed (100\% code coverage),
but that is just a statement for that everything has been executed. Have it been
executed correctly?
Are every combination of computations in the system necessary to ensure
correctness, or with other words, is it possible to collapse some states in the
system's state space without endangering the safety of the hole system?

After the model has been implemented, there must be an evaluation of the
solution. Does it ensure functional safety? How can one measure the
size of the state space that is actually verified?
Even if test generation has been done properly, the solution might not be within
the ISO-standards means of functional safety.

One must propose and motivate what should be done to be able to
achieve a semi formal verification. This can include a confidence interval
for how certain the verification is. The confidence interval would help
describing the visited state space because it is probably not feasible to
exhaustively visit all states due to the state space explosion problem.

The main objective is to prove that it is possible to do semi formal
verification for an AUTOSAR module and its specification.
It should not matter which configuration that is active and even further
how the module is implemented, because the specification should hold for all
configurations and implementations. This gives rise to that every company that
implements the module should be able to run the final code to achieve ``semi
formal verification''. Since modules in AUTOSAR are dependent the work presented here
should be generalized so it can be hooked on when implementing test suits,
using the same techniques, for other modules.

%Limitations. What should be left out and why?
\section{Scope}
We will use AUTOSAR 4.0 revision 3 for our thesis work.
Since this version of AUTOSAR consists of more than 100 specifications and other
auxiliary materials\cite{AUTOSAR:URL}, we will limit our scope to one
specification. The module of this thesis is the Watchdog Manager. This
module provides monitoring services used to maintain correctness. This
module is chosen because it got dependencies, and is used to report
development and production errors, but mainly because it executes
safety-critical work. That it got dependencies is important when doing
integration testing.

Also the aim of the work is to verify software components. In other words no
work considered hardware or a combination of hardware and software will be
prioritized. All implemented code for the verification will run on a standard
PC-machine.

%% lägga till ett stycke angående att vi bara går in på 6-9 och 6-10, och inte
%% på 6-8 eller 6-11.
